<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì±„íŒ…ë°©</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="container chat-window">
    <div class="header">ëª¨ë°”ì¼ ì±„íŒ…ë°©</div>

    <!-- ë©”ì‹œì§€ ëª©ë¡ -->
    <div class="chat-messages" id="chatMessages"></div>

    <!-- ì…ë ¥ì°½ -->
    <div class="chat-input">
      <input type="text" id="messageInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
      <button id="sendBtn">â¤</button>
    </div>
  </div>

  <script>
    const userId = localStorage.getItem('chatUserId');
    const avatar = localStorage.getItem('chatAvatar');
    const messagesContainer = document.getElementById('chatMessages');
    const input = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');

    // ë¡œê·¸ì¸ ì •ë³´ ì—†ìœ¼ë©´ í”„ë¡œí•„ ì„¤ì •ìœ¼ë¡œ ì´ë™
    if (!userId) {
      // window.location.href = 'profile.html';
    }

    // ë©”ì‹œì§€ ì „ì†¡
    const sendMessage = () => {
      const text = input.value.trim();
      if (!text) return;

      appendMessage('self', text, avatar);
      input.value = '';

      // ê°€ìƒ ìƒëŒ€ë°© ì‘ë‹µ (í…ŒìŠ¤íŠ¸ìš©)
      setTimeout(() => {
        appendMessage('other', `${userId}ë‹˜, '${text}'ì´ë¼ê³  í•˜ì…¨ì£ ? ğŸ˜Š`);
      }, 800);
    };

    sendBtn.addEventListener('click', sendMessage);
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') sendMessage();
    });

    // ë©”ì‹œì§€ ì¶”ê°€
    function appendMessage(type, text, avatarUrl) {
      const message = document.createElement('div');
      message.classList.add('message', type);
      message.textContent = text;
      messagesContainer.appendChild(message);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
  </script>
</body>
</html>